{"version":3,"file":"js/370.5953c742.js","mappings":"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","sources":["webpack://big_thing/./src/views/routes/my-user.vue","webpack://big_thing/src/views/routes/my-user.vue","webpack://big_thing/./src/views/routes/my-user.vue?9c23","webpack://big_thing/./src/views/routes/my-user.vue?0478"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-user\"},[_c('div',{staticClass:\"photo-config\"},[(!_vm.avatar)?_c('img',{staticClass:\"the_img\",attrs:{\"src\":require(\"../../assets/images/用户头像.png\"),\"alt\":\"\"}}):_c('img',{staticClass:\"the_img\",attrs:{\"src\":_vm.avatar,\"alt\":\"\"}}),_c('input',{ref:\"iptRef\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onFileChange}}),_c('div',{staticClass:\"avatar_btn\",on:{\"click\":_vm.chooseImg}},[_c('img',{attrs:{\"src\":require(\"../../assets/images/编辑图标.png\"),\"alt\":\"\"}}),_c('span',[_vm._v(\"编辑头像\")])])]),_c('div',{staticClass:\"info-config\"},[_vm._m(0),_c('div',{staticClass:\"info-config-edit\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"prop\":\"nickname\",\"label\":\"姓名：\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.nickname},model:{value:(_vm.ruleForm.nickname),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"nickname\", $$v)},expression:\"ruleForm.nickname\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"sex\",\"label\":\"性别：\"}},[_c('el-radio',{attrs:{\"label\":\"男\"},model:{value:(_vm.ruleForm.sex),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"sex\", $$v)},expression:\"ruleForm.sex\"}},[_vm._v(\"男\")]),_c('el-radio',{attrs:{\"label\":\"女\"},model:{value:(_vm.ruleForm.sex),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"sex\", $$v)},expression:\"ruleForm.sex\"}},[_vm._v(\"女\")])],1),_c('el-form-item',{attrs:{\"prop\":\"birthday\",\"label\":\"出生日期：\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":_vm.birthday,\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.ruleForm.birthday),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"birthday\", $$v)},expression:\"ruleForm.birthday\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"introduction\",\"label\":\"简介：\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.introduction},model:{value:(_vm.ruleForm.introduction),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"introduction\", $$v)},expression:\"ruleForm.introduction\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"contact\",\"label\":\"联系方式：\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.contact},model:{value:(_vm.ruleForm.contact),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"contact\", $$v)},expression:\"ruleForm.contact\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"area\",\"label\":\"地区：\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.area},model:{value:(_vm.ruleForm.area),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"area\", $$v)},expression:\"ruleForm.area\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveUserInfo}},[_vm._v(\"保存\")])],1)],1)],1)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"info-config-title\"},[_c('span',[_vm._v(\"基本信息\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"my-user\">\r\n    <!-- 头像编辑功能 -->\r\n      <div class=\"photo-config\">\r\n        <img src=\"../../assets/images/用户头像.png\" alt=\"\" v-if=\"!avatar\" class=\"the_img\">\r\n        <img :src=\"avatar\" alt=\"\" v-else class=\"the_img\">\r\n        <!--  -->\r\n\r\n        <input type=\"file\" style=\"display:none\" ref=\"iptRef\" @change=\"onFileChange\" accept=\"image/*\">\r\n        <div class=\"avatar_btn\" @click=\"chooseImg\">\r\n            <img src=\"../../assets/images/编辑图标.png\" alt=\"\" >\r\n            <span>编辑头像</span>\r\n        </div>\r\n        <!-- 保存到后台头像信息 -->\r\n        <!-- <div class=\"avatar_btn\"  @click=\"uploadFnImg\">\r\n            <img src=\"../../assets/images/编辑图标.png\" alt=\"\" >\r\n            <span>保存头像</span>\r\n        </div> -->\r\n\r\n      </div>\r\n      <!-- 基本信息编辑功能 -->\r\n      <div class=\"info-config\">\r\n          <!-- 标题 -->\r\n          <div class=\"info-config-title\"><span>基本信息</span></div>\r\n          <!-- 表单 -->\r\n          <div class=\"info-config-edit\">\r\n              <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n                  <el-form-item  prop=\"nickname\" label=\"姓名：\" ><el-input v-model=\"ruleForm.nickname\" :placeholder=\"nickname\"></el-input></el-form-item>\r\n                  <el-form-item  prop=\"sex\" label=\"性别：\"><el-radio v-model=\"ruleForm.sex\" label=\"男\" >男</el-radio><el-radio v-model=\"ruleForm.sex\" label=\"女\">女</el-radio></el-form-item>\r\n                  <el-form-item  prop=\"birthday\"  label=\"出生日期：\"><el-date-picker type=\"date\" :placeholder=\"birthday\" v-model=\"ruleForm.birthday\" style=\"width: 100%;\"  value-format=\"yyyy-MM-dd\"></el-date-picker></el-form-item>\r\n                  <el-form-item  prop=\"introduction\" label=\"简介：\"><el-input v-model=\"ruleForm.introduction\" :placeholder=\"introduction\"></el-input></el-form-item>\r\n                  <el-form-item  prop=\"contact\" label=\"联系方式：\"><el-input v-model=\"ruleForm.contact\" :placeholder=\"contact\"></el-input></el-form-item>\r\n                  <el-form-item  prop=\"area\"  label=\"地区：\"><el-input v-model=\"ruleForm.area\" :placeholder=\"area\"></el-input></el-form-item>\r\n                  <el-form-item><el-button type=\"primary\" @click=\"saveUserInfo\">保存</el-button></el-form-item>\r\n              </el-form>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updateAvatarAPI } from '@/api'\r\nimport { mapGetters } from 'vuex'\r\n// import { onMounted } from 'vue'\r\nexport default {\r\n  name: 'my-user',\r\n  computed: {\r\n    ...mapGetters(['nickname', 'image', 'introduction', 'area', 'contact', 'sex', 'birthday'])\r\n  },\r\n  data () {\r\n    return {\r\n      // 保存照片的链接--base64字符串\r\n      avatar: '',\r\n      // 表单数据部分,目前无用\r\n      ruleForm: {\r\n        nickname: '',\r\n        sex: '',\r\n        birthday: '',\r\n        introduction: '',\r\n        contact: '',\r\n        area: ''\r\n      },\r\n      rules: {\r\n        nickname: [\r\n          { required: true, message: '姓名', trigger: 'blur' }\r\n          // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        sex: [{ required: true, message: '性别', trigger: 'blur' }\r\n          // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        birthday: [\r\n          { required: true, message: '生日', trigger: 'blur', type: 'string' }\r\n          // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        introduction: [\r\n          { required: true, message: '简介', trigger: 'blur' }\r\n          // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        contact: [\r\n          { required: true, message: '联系方式', trigger: 'blur' }\r\n          // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        area: [\r\n          { required: true, message: '地区', trigger: 'blur' }\r\n          // { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击选择头像\r\n    chooseImg () {\r\n      // 模拟点击事件\r\n      this.$refs.iptRef.click()\r\n    },\r\n    // 选择完图片后要读取该文件，然后转化格式\r\n    async onFileChange (e) {\r\n      // console.log(1)\r\n      // 获取文件信息\r\n      const files = e.target.files\r\n      // console.log(files)\r\n      // 没获取到\r\n      if (files[0].length === 0) {\r\n        this.avatar = ''\r\n      } else {\r\n        // const fr = new FileReader()\r\n        // fr.readAsDataURL(files[0])\r\n        // fr.onload = e => {\r\n        // 在展示区展示\r\n        // this.avatar = e.target.result\r\n        // console.log(123)\r\n      }\r\n      this.avatar = URL.createObjectURL(files[0])\r\n      console.log(this.avatar)\r\n      const form = new FormData()\r\n      form.append('image', files[0])\r\n      await updateAvatarAPI(form)\r\n      // console.log(res)\r\n      this.$message.success('保存成功')\r\n      // 更新个人信息\r\n      this.$store.dispatch('initUserInfo')\r\n      // console.log(this.ruleForm)\r\n    },\r\n    // 更新后台头像信息\r\n    async uploadFnImg () {\r\n      // const { data: res } = await updateAvatarAPI(this.avatar)\r\n\r\n      // this.$message.success(res.message)\r\n      // 更新个人信息\r\n      // this.$store.dispatch('initUserInfo')\r\n\r\n      // this.$message.error(res.message)\r\n    },\r\n\r\n    // 点击保存用户基本信息\r\n    saveUserInfo () {\r\n      this.$refs.ruleForm.validate(async valid => {\r\n        if (valid) {\r\n          // console.log(11)\r\n          // 发出请求，送出表单内容\r\n          await updateAvatarAPI(this.ruleForm)\r\n          // console.log(res)\r\n          // 更新个人信息\r\n          this.$store.dispatch('initUserInfo')\r\n          this.$message.success('个人信息已更新')\r\n        } else { console.log(2) }\r\n      })\r\n    }\r\n  },\r\n\r\n  // created(){\r\n  // 进来时获取用户信息\r\n  // }\r\n  async mounted () {\r\n    // console.log(this.birthday)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.my-user{\r\n  width: 90%;\r\n  height: 95%;\r\n  background-color: rgb(255, 255, 255);\r\n  border-radius: 1rem;\r\n  //水平垂直\r\n  margin: 0 auto;\r\n  //头像设置\r\n  .photo-config{\r\n    padding-top: 5%;\r\n    height: 15%;\r\n    padding-left: 12rem;\r\n    >*{\r\n      display: inline-block;\r\n    }\r\n    .the_img{\r\n      border: 1px solid black;\r\n      width: 88px;\r\n      height: 89px;\r\n    }\r\n    .avatar_btn{\r\n      border: 1px solid black;\r\n      margin-left: 3rem;\r\n      img{\r\n      width: 15px;\r\n      height: 15px;\r\n      }\r\n    }\r\n    .avatar_btn:hover{\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  .info-config{\r\n    margin-left: 10%;\r\n    margin-top: 7%;\r\n    height: 73%;\r\n    .info-config-title{\r\n      border-left: 8px rgb(1, 142, 237) solid;\r\n      span{\r\n        margin-left: 13px;\r\n      }\r\n    }\r\n    .info-config-edit{\r\n      margin-top: 57px;\r\n      .demo-ruleForm{\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: wrap;\r\n      }\r\n    }\r\n  }\r\n}\r\n.el-input{\r\n  // height: 200px;\r\n}\r\n.el-input__inner{\r\n\r\n  // height: 40% ;\r\n}\r\n.el-form-item{\r\n  width: 40%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./my-user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./my-user.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./my-user.vue?vue&type=template&id=f718b6e2&scoped=true&\"\nimport script from \"./my-user.vue?vue&type=script&lang=js&\"\nexport * from \"./my-user.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my-user.vue?vue&type=style&index=0&id=f718b6e2&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f718b6e2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","avatar","attrs","require","ref","staticStyle","on","onFileChange","chooseImg","_v","_m","ruleForm","rules","nickname","model","value","callback","$$v","$set","expression","sex","birthday","introduction","contact","area","saveUserInfo","staticRenderFns","name","computed","data","required","message","trigger","type","methods","console","form","component"],"sourceRoot":""}